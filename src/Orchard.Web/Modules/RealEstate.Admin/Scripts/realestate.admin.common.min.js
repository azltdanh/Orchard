function initTooltip(){$.fn.tooltip&&$('[data-toggle="tooltip"]').length>0&&$(document).tooltip({items:'[data-toggle="tooltip"]',content:function(){var n=$(this),t=n.siblings("[data-tooltip-content]");return t.length>0?t.html():n.is("[title]")?n.attr("title"):void 0}})}function getURLParameter(n){return decodeURI((RegExp(n+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}function removeByValue(n,t){for(var i=0;i<n.length;i++)if(n[i]==t){n.splice(i,1);break}}function loadTypeCssClass(){$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetPropertyTypesForJson",data:{adsTypeCssClass:$("#AdsTypeCssClass").val(),typeGroupCssClass:$("#TypeGroupCssClass").val()},success:function(n){var t=$("#TypeId").val();$("#TypeId").empty().append("<option value=''>-- Vui l\u00f2ng ch\u1ecdn --<\/option>");$.each(n.list,function(n,t){$("#TypeId").append("<option value="+t.Value+">"+t.Text+"<\/option>")});$("#TypeId").val(t).change()},error:function(n,t,i){$("#TypeId").empty().append("<option value=''>-- Vui l\u00f2ng ch\u1ecdn --<\/option>");console.log(i)}})}function checkPendingProperties(){var n=$(".local-section-b-s-ch-duy-t.selected").length>0,t=new EventSource("/RealEstate.Admin/Home/AjaxCountPendingProperties/?countPendingInDetails="+n);t.onmessage=function(n){var t=JSON.parse(n.data);$(".navicon-b-s-n-i-b").length>0&&$("a.navicon-b-s-n-i-b").html('B\u0110S n\u1ed9i b\u1ed9                             <a href="/Admin?ProvinceId=0&StatusId=29" title="B\u0110S Ch\u1edd duy\u1ec7t">('+t.countPendingProperties+')                             <a href="/Admin?ProvinceId=0&StatusId=0&AdsRequest=True" title="B\u0110S \u0111\u0103ng VIP">('+t.countAdsRequestProperties+")                             <\/a>");$(".local-section-b-s-ch-duy-t").length>0&&($(".local-section-b-s-ch-duy-t a").text("B\u0110S Ch\u1edd duy\u1ec7t ("+t.countPendingProperties+")"),$(".local-section-b-s-ch-duy-t").hasClass("selected")&&($(".ad-selling-gp-house").length>0&&$(".ad-selling-gp-house .count").text("("+t.countPendingSellingHouse+")"),$(".ad-selling-gp-apartment").length>0&&$(".ad-selling-gp-apartment .count").text("("+t.countPendingSellingApartment+")"),$(".ad-selling-gp-land").length>0&&$(".ad-selling-gp-land .count").text("("+t.countPendingSellingLand+")"),$(".ad-leasing-gp-house").length>0&&$(".ad-leasing-gp-house .count").text("("+t.countPendingLeasingHouse+")"),$(".ad-leasing-gp-apartment").length>0&&$(".ad-leasing-gp-apartment .count").text("("+t.countPendingLeasingApartment+")"),$(".ad-leasing-gp-land").length>0&&$(".ad-leasing-gp-land .count").text("("+t.countPendingLeasingLand+")")))}}function checkPendingCustomers(){var n=$(".local-section-k-h-ch-duy-t.selected").length>0,t=new EventSource("/RealEstate.Admin/Home/AjaxCountPendingCustomers/?countPendingInDetails="+n);t.onmessage=function(n){var t=JSON.parse(n.data);$(".navicon-kh-ch-h-ng").length>0&&$("a.navicon-kh-ch-h-ng").html('Kh\u00e1ch h\u00e0ng <a href="/Admin/RealEstate/Customer?StatusId=132823" title="KH Ch\u1edd duy\u1ec7t">('+t.countPendingCustomers+")<\/a>");$(".local-section-k-h-ch-duy-t").length>0&&($(".local-section-k-h-ch-duy-t a").text("KH Ch\u1edd duy\u1ec7t ("+t.countPendingCustomers+")"),$(".local-section-k-h-ch-duy-t").hasClass("selected")&&($(".ad-buying-gp-house").length>0&&$(".ad-buying-gp-house .count").text("("+t.countPendingBuyingHouse+")"),$(".ad-buying-gp-apartment").length>0&&$(".ad-buying-gp-apartment .count").text("("+t.countPendingBuyingApartment+")"),$(".ad-buying-gp-land").length>0&&$(".ad-buying-gp-land .count").text("("+t.countPendingBuyingLand+")"),$(".ad-renting-gp-house").length>0&&$(".ad-renting-gp-house .count").text("("+t.countPendingRentingHouse+")"),$(".ad-renting-gp-apartment").length>0&&$(".ad-renting-gp-apartment .count").text("("+t.countPendingRentingApartment+")"),$(".ad-renting-gp-land").length>0&&$(".ad-renting-gp-land .count").text("("+t.countPendingRentingLand+")"),$(".ad-exchange-gp-house").length>0&&$(".ad-exchange-gp-house .count").text("("+t.countPendingExchangeHouse+")"),$(".ad-exchange-gp-apartment").length>0&&$(".ad-exchange-gp-apartment .count").text("("+t.countPendingExchangeApartment+")"),$(".ad-exchange-gp-land").length>0&&$(".ad-exchange-gp-land .count").text("("+t.countPendingExchangeLand+")")))}}function DocGiaRao(){var n=parseFloat($("#PriceProposed").val()),r,t,i,u;if(n==""||n=="-1"||isNaN(n))$("#PriceInWords").html("");else{r=$("#PaymentMethodId option:selected").val();t=$("#PaymentMethodId option:selected").text();switch(r){case"56":n=n*1e9;t="\u0111\u1ed3ng";break;case"57":n=n*1e6;t="\u0111\u1ed3ng";break;case"58":n=n*1e3;t="\u0111\u1ed3ng";break;case"60":n=n;t="USD";break;case"134122":n=n*1e6;t="USD"}n=parseFloat(n)+parseFloat(.009);i=n.toString();n=i.substring(0,i.indexOf("."));u=DocTienBangChu(n)+" "+t+" / "+$("#PaymentUnitId option:selected").text();$("#PriceInWords").html(u)}}function DocSo3ChuSo(n){var u=parseInt(n/100),t=parseInt(n%100/10),r=n%10,i="";if(u==0&&t==0&&r==0)return"";u!=0&&(i+=ChuSo[u]+" tr\u0103m ",t==0&&r!=0&&(i+=" linh "));t!=0&&t!=1&&(i+=ChuSo[t]+" m\u01b0\u01a1i",t==0&&r!=0&&(i=i+" linh "));t==1&&(i+=" m\u01b0\u1eddi ");switch(r){case 1:i+=t!=0&&t!=1?" m\u1ed1t ":ChuSo[r];break;case 5:i+=t==0?ChuSo[r]:" l\u0103m ";break;default:r!=0&&(i+=ChuSo[r])}return i}function DocTienBangChu(n){var e=0,u=0,i=0,r="",f="",t=[];if(n<0)return"S\u1ed1 ti\u1ec1n \u00e2m !";if(n==0)return"Kh\u00f4ng \u0111\u1ed3ng !";if(i=n>0?n:-n,n>8999999999999999)return"S\u1ed1 qu\u00e1 l\u1edbn!";for(t[5]=Math.floor(i/1e15),isNaN(t[5])&&(t[5]="0"),i=i-parseFloat(t[5].toString())*1e15,t[4]=Math.floor(i/1e12),isNaN(t[4])&&(t[4]="0"),i=i-parseFloat(t[4].toString())*1e12,t[3]=Math.floor(i/1e9),isNaN(t[3])&&(t[3]="0"),i=i-parseFloat(t[3].toString())*1e9,t[2]=parseInt(i/1e6),isNaN(t[2])&&(t[2]="0"),t[1]=parseInt(i%1e6/1e3),isNaN(t[1])&&(t[1]="0"),t[0]=parseInt(i%1e3),isNaN(t[0])&&(t[0]="0"),e=t[5]>0?5:t[4]>0?4:t[3]>0?3:t[2]>0?2:t[1]>0?1:0,u=e;u>=0;u--)f=DocSo3ChuSo(t[u]),r+=f,t[u]>0&&(r+=Tien[u]),u>0&&f.length>0&&(r+=",");return r.substring(r.length-1)==","&&(r=r.substring(0,r.length-1)),r.substring(1,2).toUpperCase()+r.substring(2)}window.setInterval("$('.icon-coin').toggleClass('icon-blink');",500);window.mobileAndTabletcheck=function(){var n=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n};$(function(){function n(){$("#ProvinceId",$("#AddressCorner").closest("form")).children("option:selected").text()=="H\u00e0 N\u1ed9i"?$("#AddressCorner").closest(".control-group").show():$("#AddressCorner").closest(".control-group").hide()}function i(){var t=$("#ApartmentId",$(this).closest("form")),n=$("#ApartmentIds",$(this).closest("form"));$("#ChkOtherProvinceName").is(":checked")&&($("#ProvinceId").val("").change().siblings(".combobox-container").hide(),$("#OtherProvinceName").show());$("#ChkOtherDistrictName").is(":checked")&&($("#DistrictId").siblings(".combobox-container").hide(),$("#OtherDistrictName").show());$("#ChkOtherWardName").is(":checked")&&($("#WardId").siblings(".combobox-container").hide(),$("#OtherWardName").show());$("#ChkOtherStreetName").is(":checked")&&($("#StreetId").siblings(".combobox-container").hide(),$("#OtherStreetName").show());$("#ChkOtherProjectName").is(":checked")&&($("#ApartmentId").siblings(".combobox-container").hide(),$("#OtherProjectName").show(),n.length>0&&(n.siblings(".btn-group.form-control").hide(),n.multiselect("rebuild")),t.siblings(".btn-group.form-control").hide(),t.empty())}function t(){$("#AdsGoodDeal").is(":checked")&&($("#FlagId").val()==35&&$("#AdsTypeCssClass").val()=="ad-selling"&&$("#TypeGroupCssClass").val()=="gp-house"?($("#PriceEstimatedByStaff").closest(".control-group").show(),($("#PriceEstimatedByStaff").val()==""||$("#PriceEstimatedByStaff").val()<$("#PriceEstimatedByStaff").val())&&($("#PriceEstimatedByStaff").focus(),$("html, body").animate({scrollTop:$("#PriceEstimatedByStaff").closest(".content-item").offset().top},500))):$("#PriceEstimatedByStaff").closest(".control-group").hide())}$("legend .icon-expand").click(function(){$(this).toggleClass("icon-collapse");$(this).parent().siblings().toggle()});$(".ui-growl-image-info").click(function(){$(this).siblings(".ui-growl-message").toggle("slow")});initTooltip();$("table.items tbody tr").hover(function(){$(this).addClass("highlight")},function(){$(this).removeClass("highlight")});$("table.items tbody tr td input[type=checkbox]").change(function(){$(this).closest("tr").toggleClass("selected",$(this).is(":checked"))});$(".selectAll").change(function(){$("input:checkbox[name^="+this.value+"]").attr("checked",this.checked).change()});$.cookie("advance-search-expand")=="true"?($(".advance-search-trigger").find(".ui-icon").addClass("icon-collapse"),$("#tblAdvanceSearch").show()):$("#tblAdvanceSearch").hide();$(".advance-search-trigger").click(function(){return $(this).find(".ui-icon").toggleClass("icon-collapse"),$("#tblAdvanceSearch").toggle("fast"),$.cookie("advance-search-expand",!($.cookie("advance-search-expand")=="true")),!1});$("#branding").append('<div id="menu-expand-collapse" class="menu-collapse"><\/div>');$("#menu-expand-collapse").on("click",function(){$("#menu").is(":visible")?($("#menu").hide("slow"),$("html, body, #layout-content, #footer").addClass("disable-bg-img"),$("#main").animate({marginLeft:"20px"},500),$(this).addClass("menu-expand"),$.cookie("menu-expand",!0)):($("#menu").show("slow"),$("html, body, #layout-content, #footer").removeClass("disable-bg-img"),$("#main").animate({marginLeft:"260px"},500),$(this).removeClass("menu-expand"),$.cookie("menu-expand",!1))});$.cookie("menu-expand")=="true"&&$("#menu-expand-collapse").click();$("#StatusCssClass").change(function(){if($(this).val()=="st-sold")$("#dialogIsSoldByGroup").modal("show").one("click","button",function(){$("#IsSoldByGroup").prop("checked",$(this).val()=="true")})});n();$("#ProvinceId",$("#AddressCorner").closest("form")).change(function(){n()});$("#ChkOtherDistrictName").change(function(){$(this).is(":checked")?($("#DistrictId").val("").change().siblings(".combobox-container").hide(),$("#OtherDistrictName").show(),$("#ChkOtherWardName").attr("checked",!0).change(),$("#ChkOtherStreetName").attr("checked",!0).change(),$("#ChkOtherProjectName").attr("checked",!0).change()):($("#DistrictId").val("").change().siblings(".combobox-container").show(),$("#OtherDistrictName").hide(),$("#ChkOtherWardName").attr("checked",!1).change(),$("#ChkOtherStreetName").attr("checked",!1).change(),$("#ChkOtherProjectName").attr("checked",!1).change())});$("#ChkOtherWardName").change(function(){$(this).is(":checked")?($("#WardId").val("").siblings(".combobox-container").hide(),$("#OtherWardName").show()):($("#WardId").val("").siblings(".combobox-container").show(),$("#OtherWardName").hide())});$("#ChkOtherStreetName").change(function(){$(this).is(":checked")?($("#StreetId").val("").siblings(".combobox-container").hide(),$("#OtherStreetName").show()):($("#StreetId").val("").siblings(".combobox-container").show(),$("#OtherStreetName").hide())});$("#ChkOtherProjectName").change(function(){var t=$("#ApartmentId",$(this).closest("form")),n=$("#ApartmentIds",$(this).closest("form"));$(this).is(":checked")?($("#ApartmentId").val("").siblings(".combobox-container").hide(),t.empty(),n.length>0&&(n.siblings(".btn-group.form-control").hide(),n.multiselect("rebuild")),$("#OtherProjectName").show()):($("#ApartmentId").val("").siblings(".combobox-container").show(),n.length>0&&n.siblings(".btn-group.form-control").show(),$("#OtherProjectName").hide())});i();$("#AdsTypeCssClass").change(function(){$(this).val()=="ad-leasing"?$("#PaymentMethodId").val(57).change():$("#PaymentMethodId").val(56).change();$("#TypeGroupCssClass").val()=="gp-house"&&$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetPropertyTypesForJson",data:{adsTypeCssClass:$("#AdsTypeCssClass").val(),typeGroupCssClass:$("#TypeGroupCssClass").val()},success:function(n){var t=$("#TypeId").val();$("#TypeId").empty().append("<option value=''>-- Vui l\u00f2ng ch\u1ecdn --<\/option>");$.each(n.list,function(n,t){$("#TypeId").append("<option value="+t.Value+">"+t.Text+"<\/option>")});$("#TypeId").val(t).change()},error:function(n,t,i){$("#TypeId").empty().append("<option value=''>-- Vui l\u00f2ng ch\u1ecdn --<\/option>");console.log(i)}})});$("#TypeGroupCssClass").change(function(){var n=$(this).val();$("#CurrentTypeGroupCssClass").length>0?loadTypeCssClass():window.location=$("a."+n).attr("href")});$("#TypeId").change(function(){var n=$(this).val();n==231?($("#tblConstruction").hide(),$("#tblConstruction input").attr("disabled","disabled")):($("#tblConstruction").show(),$("#tblConstruction input").removeAttr("disabled"));n>0&&$("#CurrentTypeGroupCssClass").length>0&&$("#TypeGroupCssClass").val()!=$("#CurrentTypeGroupCssClass").val()&&$("[name='submit.SaveContinue']")[0].click();$("#Floors").change()}).change();$("#FloorsCount").change(function(){$(this).val()==-1?($("#Floors").closest(".control-group").show(),$("#Floors").focus()):$("#Floors").val($(this).val()).closest(".control-group").hide();$("#Floors").change()}).change();$("#Floors").change(function(){$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetPropertyTypeConstructionsForJson",data:{typeId:$("#TypeId").val(),floors:$("#Floors").val()},success:function(n){var t=$("#TypeConstructionId").val();$("#TypeConstructionId").empty().append("<option value=''>-- Vui l\u00f2ng ch\u1ecdn --<\/option>");$.each(n.list,function(n,t){$("#TypeConstructionId").append("<option value="+t.Value+">"+t.Text+"<\/option>")});$("#TypeConstructionId").val(t).change()},error:function(n,t,i){$("#TypeConstructionId").empty().append("<option value=''>-- Vui l\u00f2ng ch\u1ecdn --<\/option>");console.log(i)}})});$("#ApartmentId").change(function(){var r=$("#"+this.id.replace("ApartmentId","WardId"),$(this).closest("form")),u=$("#"+this.id.replace("ApartmentId","StreetId"),$(this).closest("form"));if($(this).val()>0){var n=$(this).val(),t=$("#oldAprartmentId").val(),i=$("#Id").text();$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetApartmentInfoForJson",data:{apartmentId:$(this).val(),propertyId:i},success:function(f){$(".apartment_"+t).remove();$("#oldAprartmentId").val(n);$.each(f.apartmentList,function(t,r){if(r.Path!=""){var u="",f=r.Path.split("/");r.IsAvatar&&(u='checked="checked"');$("ul.gallery").append('<li class="apartment_'+n+'">                             <div class="image-wrapper">                             <div class="image-container">                                 <a href="'+r.Path+'" target="_blank" rel="prettyPhoto['+i+']">                                     <img alt="'+f[f.length-1]+'" src="'+r.Path+'" width="140" />                                 <\/a>                             <\/div>                             <\/div>                             <div class="image-control">                                 <label><input type="checkbox" name="chkPublished" checked="checked" id="chkPublished-'+r.Id+'" value="'+r.Id+'" >Published<\/label>                                 <label><input type="radio" name="radIsAvatar" '+u+' id="radIsAvatar-'+r.Id+'" value="'+r.Id+'" >Avatar<\/label>                             <\/div>                         <\/li>')}});f.apartmentWardId==0?r.siblings(".combobox-container").children("input").val(""):$("#WardId").val(f.apartmentWardId).combobox("refresh").change();f.apartmentStreetId==0?u.siblings(".combobox-container").children("input").val(""):$("#StreetId").val(f.apartmentStreetId).combobox("refresh").change();n!=t&&$("#AddressNumber").val(f.apartmentAddressNumber).change();$("#ApartmentFloors").val(f.apartmentFloors);$("#ApartmentElevators").val(f.apartmentElevators);$("#ApartmentBasements").val(f.apartmentBasements);$("#Content").val(f.apartmentDescription);typeof tinyMCE!="undefined"&&n!=t&&tinyMCE.get("Content").setContent(f.apartmentDescription);$("#ApartmentTradeFloors").val(f.apartmentTradeFloors);$(".apartment-adv-Childcare").prop("checked",f.apartmentHaveChildcare);$(".apartment-adv-Park").prop("checked",f.apartmentHavePark);$(".apartment-adv-SwimmingPool").prop("checked",f.apartmentHaveSwimmingPool);$(".apartment-adv-SuperMarket").prop("checked",f.apartmentHaveSuperMarket);$(".apartment-adv-SportCenter").prop("checked",f.apartmentHaveSportCenter);$(".apartment-adv-Hospital").prop("checked",f.apartmentHaveHospital);$(".apartment-adv-PublicArea").prop("checked",f.apartmentHavePublicArea)},error:function(n,t,i){$("#ApartmentFloors, #ApartmentElevators, #ApartmentBasements").val("");$(".apartment-adv-Childcare, .apartment-adv-Park, .apartment-adv-SwimmingPool, .apartment-adv-SuperMarket, .apartment-adv-SportCenter").prop("checked",!1);console.log(i)}})}}).change();$("#Published").change(function(){$(this).is(":checked")&&$("#AddAdsExpirationDate").val("Day90")});t();$("#AdsGoodDeal").change(function(){$(this).is(":checked")?($("#AddAdsGoodDealExpirationDate").val("Day90"),t()):$("#PriceEstimatedByStaff").closest(".control-group").hide()});$("#AdsVIP").change(function(){$(this).is(":checked")&&($("#AddAdsVIPExpirationDate").val("Day90"),$("#Published").attr("checked",!0).change())});$("#AdsHighlight").change(function(){$(this).is(":checked")&&$("#AddAdsHighlightExpirationDate").val("Day90")});$("#LocationCssClass").change(function(){var t,n;switch($(this).val()){case"h-front":$("#StreetWidth").removeAttr("disabled");$("#divStreetWidth").show();$("#DistanceToStreet").attr("disabled","disabled");$("#divDistanceToStreet").hide();$("#AlleyTurns").attr("disabled","disabled");$("#divAlleyTurns").hide();$('input[id^="AlleyWidth"]').attr("disabled","disabled");$('[id^="divAlleyWidth"]').hide();break;case"h-alley":for($("#StreetWidth").attr("disabled","disabled"),$("#divStreetWidth").hide(),$("#DistanceToStreet").removeAttr("disabled"),$("#divDistanceToStreet").show(),$("#AlleyTurns").removeAttr("disabled"),$("#divAlleyTurns").show(),$('input[id^="AlleyWidth"]').removeAttr("disabled"),t=$("#AlleyTurns").val(),$('[id^="divAlleyWidth"]').hide(),n=0;n<=t;n++)$('[id^="divAlleyWidth'+n+'"]').show();$('[id^="divAlleyWidth1"]').show();break;default:$("#StreetWidth").attr("disabled","disabled");$("#divStreetWidth").hide();$("#DistanceToStreet").attr("disabled","disabled");$("#divDistanceToStreet").hide();$("#AlleyTurns").attr("disabled","disabled");$("#divAlleyTurns").hide();$('input[id^="AlleyWidth"]').attr("disabled","disabled");$('[id^="divAlleyWidth"]').hide()}}).change();$("#AlleyTurns").change(function(){var n,t;if($("#LocationCssClass").val()=="h-alley")for(n=$(this).val(),n>6&&(n=6,$(this).val("6")),n<=0&&(n=1,$(this).val("1")),$('[id^="divAlleyWidth"]').hide(),t=0;t<=n;t++)$('[id^="divAlleyWidth'+t+'"]').show()}).change();$("#PriceProposed, #PaymentMethodId, #PaymentUnitId").change(function(){DocGiaRao()});$("#PriceProposed").keyup(function(){DocGiaRao()});DocGiaRao();$('[name="submit.Estimate"]').click(function(){(isNaN($("#PriceProposed").val())||$("#PriceProposed").val()=="")&&$("#PriceProposed").val(-1)});$("#WardId, #StreetId, #ApartmentId, #AddressNumber, #AddressCorner, #ApartmentNumber, #AdsTypeCssClass").change(function(){var u,f,n,t,i,r;if(!$("#IsExternal").is(":checked")){u=parseInt($("#Id").html());isNaN(u)&&(u=0);f=parseInt($("#ProvinceId").val());isNaN(f)&&(f=0);n=parseInt($("#DistrictId").val());isNaN(n)&&(n=0);t=parseInt($("#WardId").val());isNaN(t)&&(t=0);i=parseInt($("#StreetId").val());isNaN(i)&&(i=0);r=parseInt($("#ApartmentId").val());isNaN(r)&&(r=0);var e=$("#AddressNumber").val(),s=$("#AddressCorner").is(":visible")?$("#AddressCorner").val():"",o=$("#ApartmentNumber").val(),h=$("#AdsTypeCssClass").val();n>0&&(t>0&&i>0&&e!=""&&e!=null||r>0&&o!=""&&o!=null)&&$.ajax({type:"post",dataType:"",url:"/RealEstate.Admin/Home/AjaxValidateAddress",data:{id:u,provinceId:f,districtId:n,wardId:t,streetId:i,apartmentId:r,addressNumber:e,addressCorner:s,apartmentNumber:o,adsTypeCssClass:h,__RequestVerificationToken:antiForgeryToken},success:function(n){if(n.exists){var t='<div id="exists" class="message message-Warning">B\u1ea1n c\u00f3 mu\u1ed1n ch\u1ec9nh s\u1eeda th\u00f4ng tin B\u0110S: <a href="'+n.link+'">'+n.address+"<\/a> "+n.info+"<\/div>";$("#messages").length==0&&$("#main").prepend('<div id="messages"><div class="zone zone-messages"><\/div><\/div>');$("#messages .zone-messages").prepend(t);$(".primaryAction").attr("disabled","disabled").addClass("disabled");switch(n.statusCssClass){case"st-sold":case"st-onhold":case"st-trash":case"st-pending":case"st-no-contact":case"st-estimate":$("#overlay .overlay-content").html('<div class="message message-Warning" style="padding:10px;margin:0;"><h2>'+n.info+'<\/h2><h3>Click v\u00e0o link \u0111\u1ec3 s\u1eeda th\u00f4ng tin:<br/> <a href="'+n.link+'">'+n.address+"<\/a><\/h3><\/div>");$("#overlay").show();break;default:alert("\u0110\u1ecba ch\u1ec9: "+n.address+" \u0111\u00e3 c\u00f3 trong kho d\u1eef li\u1ec7u.")}}else $("#messages #exists").remove(),$(".primaryAction").removeAttr("disabled").removeClass("disabled")},error:function(){}})}return!1});$("#ContactPhone.ajax-validate").change(function(){var n=parseInt($("#Id").html()),t;return isNaN(n)&&(n=0),t=$("#ContactPhone").val(),t!=""&&$.ajax({type:"post",dataType:"",url:"/RealEstate.Admin/Home/AjaxValidateContactPhone",data:{id:n,contactPhone:t,__RequestVerificationToken:antiForgeryToken},success:function(n){if(n.exists){var t='<div id="exists" class="message message-Warning">B\u1ea1n c\u00f3 mu\u1ed1n ch\u1ec9nh s\u1eeda th\u00f4ng tin KH: <a href="'+n.link+'">'+n.contactName+" - "+n.contactPhone+"<\/a><\/div>";$("#messages").length==0&&$("#main").prepend('<div id="messages"><div class="zone zone-messages"><\/div><\/div>');$("#messages .zone-messages").prepend(t);$(".primaryAction").attr("disabled","disabled").addClass("disabled");alert("Kh\u00e1ch h\u00e0ng: "+n.contactName+" - "+n.contactPhone+" \u0111\u00e3 c\u00f3 trong kho d\u1eef li\u1ec7u.")}else $("#messages #exists").remove(),$(".primaryAction").removeAttr("disabled").removeClass("disabled")},error:function(){}}),!1});$("#DistrictId.ajax-validate-relation, #WardId.ajax-validate-relation, #StreetId.ajax-validate-relation").change(function(){var n=parseInt($("#Id").html());isNaN(n)&&(n=0);var t=parseInt($("#DistrictId").val()),i=parseInt($("#WardId").val()),r=parseInt($("#StreetId").val());return t>0&&i>0&&r>0&&$.ajax({type:"post",dataType:"",url:"/RealEstate.Admin/Home/AjaxValidateStreetRelation",data:{id:n,districtId:t,wardId:i,streetId:r,__RequestVerificationToken:antiForgeryToken},success:function(n){if(n.exists){var t='<div id="exists" class="message message-Warning">B\u1ea1n c\u00f3 mu\u1ed1n ch\u1ec9nh s\u1eeda th\u00f4ng tin: <a href="'+n.link+'">'+n.name+"<\/a><\/div>";$("#messages").length==0&&$("#main").prepend('<div id="messages"><div class="zone zone-messages"><\/div><\/div>');$("#messages .zone-messages").prepend(t);$(".primaryAction").attr("disabled","disabled").addClass("disabled");alert("\u0110\u01b0\u1eddng "+n.name+" \u0111\u00e3 c\u00f3 trong d\u1eef li\u1ec7u.")}else $("#messages #exists").remove(),$(".primaryAction").removeAttr("disabled").removeClass("disabled")},error:function(){}}),!1});$("#CoefficientAlleyId.ajax-validate-relation").change(function(){var n=parseInt($("#CoefficientAlleyId").val());return n>0&&$.ajax({type:"post",dataType:"",url:"/RealEstate.Admin/Home/AjaxGetCoefficientAlley",data:{id:n,__RequestVerificationToken:antiForgeryToken},success:function(n){n.success?($("#CoefficientAlley1Max").val(n.H1max),$("#CoefficientAlley1Min").val(n.H1min),$("#CoefficientAlleyEqual").val(n.Hequal),$("#CoefficientAlleyMax").val(n.Hmax),$("#CoefficientAlleyMin").val(n.Hmin)):($("#CoefficientAlley1Max").val(""),$("#CoefficientAlley1Min").val(""),$("#CoefficientAlleyEqual").val(""),$("#CoefficientAlleyMax").val(""),$("#CoefficientAlleyMin").val(""))},error:function(){}}),!1});$("#tabsAdsType a").click(function(){$(this).parent().addClass("active").siblings().removeClass("active");$("#AdsTypeId").val($(this).attr("ads"));$("#TypeGroupId").val($(this).attr("typegroup"));$(this).is(':contains("thu\u00ea")')?$('#PaymentMethodId option:contains("Tri\u1ec7u"):first').attr("selected","selected"):$('#PaymentMethodId option:contains("T\u1ef7")').attr("selected","selected");var n=$(this).closest("form");return n.find("input[type=text]").val(""),n.find("#ProvinceId").change(),n.find(".multiselect").multiselect("rebuild"),n.submit(),!1});$(".pager a").each(function(){for(var i,r,s=this.href.substring(0,this.href.indexOf("?")+1),h=this.href.substring(this.href.indexOf("?")+1),n=h.split("&"),f=[],u=[],t=0;t<n.length;t++)if(n[t].indexOf("%2C")>0){u.push(n[t]);var e=n[t].indexOf("="),c=n[t].substring(0,e),l=n[t].substring(e+1),o=l.replace(/%2C/gi,",").split(",");for(i=0;i<o.length;i++)f.push(c+"="+o[i])}for(r=0;r<u.length;r++)removeByValue(n,u[r]);n=n.concat(f);$(this).attr("href",s+n.join("&"))});$("#publishActions, .publishActions").change(function(){var n=$(this).val();switch(n){case"Export":if($(":checkbox[name^=Properties]:checked").length>0)$('button[name="submit.BulkEdit"]').click();else return alert("Vui l\u00f2ng ch\u1ecdn c\u00e1c B\u0110S c\u1ea7n \u0111\u0103ng tin."),$(this).val(""),!1;break;case"UpdateNegotiateStatus":confirm("Chuy\u1ec3n c\u00e1c B\u0110S [\u0110ang th\u01b0\u01a1ng l\u01b0\u1ee3ng] qu\u00e1 th\u1eddi gian 7 ng\u00e0y th\u00e0nh [\u0110ang rao b\u00e1n] ?")&&($("#ReturnUrl").val(location),$('button[name="submit.BulkEdit"]').click());break;case"UpdateMetaDescriptionKeywords":confirm("C\u1eadp nh\u1eadt l\u1ea1i to\u00e0n b\u1ed9 meta Decription Keywords B\u0110S?")&&($("#ReturnUrl").val(location),$('button[name="submit.BulkEdit"]').click());break;default:$(':checkbox[name$=".IsChecked"]:checked').length>0?$("#ReturnUrl").val(location):(alert("Vui l\u00f2ng ch\u1ecdn d\u1eef li\u1ec7u c\u1ea7n c\u1eadp nh\u1eadt."),$(this).val(""))}return!0});$("form[method=get]").submit(function(){$("input[type=text], select, input[type=hidden]",this).each(function(){this.disabled=$(this).val()=="false"||$(this).val()==""});$("input[type=checkbox]",this).each(function(){this.disabled=!$(this).is(":checked")});$("#PaymentMethodId").val()==56&&$("#PaymentMethodId").attr("disabled","disabled");$("#PaymentUnitId").val()==89&&$("#PaymentUnitId").attr("disabled","disabled");$("#Order").val()=="LastUpdatedDate"&&$("#Order").attr("disabled","disabled");$('button[name="submit.Filter"]').attr("disabled","disabled");$("input[name^=autocomplete]").attr("disabled","disabled");$('input[name="__RequestVerificationToken"]').attr("disabled","disabled")});$(".form-serialize").each(function(){$(this).data("serialize",$(this).serialize())});$("#YoutubeUpload").on("change",function(){$(this).length>0&&$("#IsChanged").attr("checked","checked")});$("form").submit(function(){isNaN($("#Latitude").val())&&$("#Latitude").val(0);isNaN($("#Longitude").val())&&$("#Longitude").val(0);$(this).hasClass("form-serialize")&&$(this).serialize()!=$(this).data("serialize")&&$("#IsChanged").attr("checked","checked");$('input[type="submit"], .button').prop("disabled",!0).click(function(){return!1})});$("#AddAdsVIPExpirationDate").change(function(){var t=$(this).val(),n;switch(t){case"Day10":n=10;break;case"Day20":n=20;break;case"Day30":n=30;break;case"Day60":n=60;break;case"Day90":n=90;break;default:n=0}})});$(function(){if($.fn.dialog){$("#dialog:ui-dialog").dialog("destroy");$("div[id^=dialog]").removeClass("ui-dialog").dialog({autoOpen:!1,closeOnEscape:!0,resizable:!1,modal:!0,width:"auto"});$(document).on("click","a.dialog-trigger",function(){return $($(this).attr("href")).dialog("open"),!1});$(document).on("click","button.dialog-trigger",function(){return $($(this).val()).dialog("open"),!1})}$.fn.datepicker&&$(".date-box").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,numberOfMonths:1,onSelect:function(n){var t=$(this).attr("id");t.indexOf("From")>=0?$("#"+$(this).attr("id").replace("From","To")).datepicker("option","minDate",n):t.indexOf("To")>=0&&$("#"+$(this).attr("id").replace("To","From")).datepicker("option","maxDate",n)}});$.fn.floatHeader&&$(".float-header").floatHeader({fadeIn:250,fadeOut:250});$("tr[data-id]").each(function(){});$(".section-b-s-ch-duy-t").length>0&&($(".section-b-s-ch-duy-t").hide(),window.addEventListener("DOMContentLoaded",checkPendingProperties,!1));$(".section-k-h-ch-duy-t").length>0&&($(".section-k-h-ch-duy-t").hide(),window.addEventListener("DOMContentLoaded",checkPendingCustomers,!1));$("#PropertyTypeGroupId").change(function(){var n=$(this).val();n==52?($(".apartment-name, .apartment-floor").show(),$(".not-apartment-floor input").attr("disabled","disabled"),$(".apartment-floor input").removeAttr("disabled"),$(".not-apartment").hide(),$("#PaymentMethodId option[value=57]").prop("selected",!0)):($(".not-apartment").show(),$(".apartment-name, .apartment-floor").hide(),$(".not-apartment-floor input").removeAttr("disabled"),$(".apartment-floor input").attr("disabled","disabled"),$("#PaymentMethodId option[value=56]").prop("selected",!0))}).change();$("#AdsTypeId").change(function(){var n=$(this).val();n==98466?$("#PaymentMethodId option[value=57]").prop("selected",!0):n==98465&&$("#PaymentMethodId option[value=56]").prop("selected",!0)}).change();$(".delYoutubeVideo").click(function(){if(confirm("B\u1ea1n c\u00f3 ch\u1eafc mu\u1ed1n x\u00f3a ?")){var n=$(this);$.ajax({type:"post",dataType:"",url:"/RealEstate.Admin/Home/AjaxDelYoutube",data:{propertyId:$(this).data("id"),__RequestVerificationToken:antiForgeryToken},success:function(t){t.status&&($(n).closest(".content-item").remove(),$("#YoutubeId").val(""))},error:function(){}})}})});var ChuSo=[" kh\u00f4ng "," m\u1ed9t "," hai "," ba "," b\u1ed1n "," n\u0103m "," s\u00e1u "," b\u1ea3y "," t\u00e1m "," ch\u00edn "],Tien=[""," ngh\u00ecn"," tri\u1ec7u"," t\u1ef7"," ngh\u00ecn t\u1ef7"," tri\u1ec7u t\u1ef7"];$("#FloorFrom, #FloorTo").change(function(){var t=Number($("#FloorFrom").val()),i=Number($("#FloorTo").val()),u,r,n;if(t>0&&i>0&&i-t>=1){for(u=Number(i-t),$("#price-difference").show(),r="",n=t;n<=i;n++)r+='<tr>                                <td><input type="text" id="ToPosition'+n+'" name="ToPosition'+n+'" placeholder="T\u1ea7ng" class="text text-box" value="'+n+'" /><\/td>                                <td><input type="text" id="Coefficient'+n+'" name="Coefficient'+n+'" placeholder="h\u1ec7 s\u1ed1" class="text text-box" /><\/td>                            <\/tr>';$("#tbl-pricedifference tbody").html(r)}else $("#tbl-pricedifference tbody").html("");t>0&&i>0?i-t<0&&alert("Gi\u00e1 tr\u1ecb nh\u1eadp v\u00e0o kh\u00f4ng \u0111\u00fang!"):t==0&&i==0&&alert("Gi\u00e1 tr\u1ecb nh\u1eadp v\u00e0o kh\u00f4ng \u0111\u00fang!.")});$("#RoomInFloor").change(function(){var i=$(this).val(),n=$("#ApartmentBlockId",$(this).closest("form")).val(),t;if(n==null||n==0)return alert("Vui l\u00f2ng ch\u1ecdn Block d\u1ef1 \u00e1n"),!1;i>0?(t="",$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/AjaxGetListApartmentBlockInfo",data:{blockId:n},success:function(n){var u,r,f;for($.each(n.list,function(n,i){t+='<option value="'+i.Value+'">'+i.Text+"<\/option>"}),$("#apartment-info").show(),u="",r=1;r<=i;r++)f='<select name="ApartmentName'+r+'" style="width: 100px; margin-right: 10px;">'+t+"<\/select>",u+="<tr>                                    <td>C\u0103n "+r+"<\/td>                                    <td>"+f+'<\/td>                                    <td><input type="text" id="ApartmentCoefficient'+r+'" name="ApartmentCoefficient'+r+'" placeholder="T\u1ed5ng h\u1ec7 s\u1ed1" class="text text-box" /><\/td>                                <\/tr>';$("#tbl-apartment tbody").html(u)},error:function(){}})):alert("Gi\u00e1 tr\u1ecb nh\u1eadp v\u00e0o kh\u00f4ng \u0111\u00fang")});$(".apartment-cart-form").submit(function(){var n=!1;return $("#tbl-apartment input[type='text']").each(function(){$(this).val()==""&&(n=!0)}),n&&alert("Vui l\u00f2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\u00f4ng tin"),n?!1:void 0});$(".saveuserproperty").on("click",function(){var n=$(this);$.ajax({type:"post",dataType:"JSON",traditional:!0,url:"/ajax/RealEstate.FrontEnd/PropertySearch/SaveProperty",data:{propertyid:$(n).data("id"),__RequestVerificationToken:antiForgeryToken},success:function(t){t.success==!0?($(n).remove(),alert("L\u01b0u tin th\u00e0nh c\u00f4ng")):t.flaguser==!0&&(alert("Tin n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c l\u01b0u."),$(n).remove())},error:function(){}})});$(".deleteuserproperty").on("click",function(){var n=$(this);$.ajax({type:"post",dataType:"JSON",traditional:!0,url:"/ajax/RealEstate.FrontEnd/PropertySearch/DeleteUserProperty",data:{propertyid:$(n).data("id"),__RequestVerificationToken:antiForgeryToken},success:function(t){t.success==!0&&($(n).remove(),alert("\u0110\u00e3 x\u00f3a th\u00e0nh c\u00f4ng"))},error:function(){}})});$("#ExchangeTypeClass").change(function(){var n=$(this);$("#ExchangeValue").closest(".control-group").toggle(!($(n).val()==""||$(n).val()=="exchange-parity"));$(n).val()!=null&&$(n).val()=="exchange-more"&&$(".label-exchange").text("S\u1ed1 ti\u1ec1n b\u00f9 th\u00eam:");$(n).val()!=null&&$(n).val()=="exchange-lower"&&$(".label-exchange").text("S\u1ed1 ti\u1ec1n mu\u1ed1n nh\u1eadn th\u00eam:")}).change();$(function(){if($.fn.select2){var n=function(n){return n.name},t=function(n){return'<div class="select2-result">'+n.name+"<\/div>"},i=function(n,t){var i=$(n).val();i!==""&&(n.is(".select2-user")&&$.ajax("/RealEstate.Admin/Home/GetUserForJson/"+i,{dataType:"json"}).done(function(n){t(n)}),n.is(".select2-group")&&$.ajax("/RealEstate.Admin/Home/GetGroupForJson/"+i,{dataType:"json"}).done(function(n){t(n)}))};$(".select2-user,.select2-group").select2({language:"vi",minimumInputLength:2,multiple:!1,quietMillis:100,id:function(n){return n.id},ajax:{url:function(){return $(this).is(".select2-user-available-group-member")?"/RealEstate.Admin/Home/SearchAvailableGroupMemberUsersForJson":$(this).is(".select2-user-available-group-admin")?"/RealEstate.Admin/Home/SearchAvailableGroupAdminUsersForJson":$(this).is(".select2-group-user")?"/RealEstate.Admin/Home/SearchGroupUsersForJson":$(this).is(".select2-user")?"/RealEstate.Admin/Home/SearchUsersForJson":$(this).is(".select2-group-seeder")?"/RealEstate.Admin/Home/SearchSeederGroupsForJson":$(this).is(".select2-group")?"/RealEstate.Admin/Home/SearchGroupsForJson":void 0},dataType:"json",type:"GET",data:function(n,t){return{q:n,page:t||1,g:$(this).attr("group")}},results:function(n){return{results:n.items,more:n.items&&n.items.length==10?!0:!1}}},formatResult:t,formatSelection:n,initSelection:i,allowClear:!0})}});