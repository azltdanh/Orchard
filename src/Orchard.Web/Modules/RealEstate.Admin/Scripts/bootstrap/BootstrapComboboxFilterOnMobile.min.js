if($(window).width()<=767){!function(n){"use strict";var t=function(t,i){this.options=n.extend({},n.fn.combobox.defaults,i);this.$source=n(t);this.$container=this.setup();this.$element=this.$container.find("input[type=text]");this.$target=this.$container.find("input[type=hidden]");this.$button=this.$container.find(".dropdown-toggle");this.$menu=n(this.options.menu).appendTo("body");this.template=this.options.template||this.template;this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.shown=!1;this.selected=!1;this.refresh();this.transferAttributes();this.listen()};t.prototype={constructor:t,setup:function(){var t=n(this.template());return this.$source.before(t),this.$source.hide(),t},disable:function(){this.$element.prop("disabled",!0);this.$button.attr("disabled",!0);this.disabled=!0;this.$container.addClass("combobox-disabled")},enable:function(){this.$element.prop("disabled",!1);this.$button.attr("disabled",!1);this.disabled=!1;this.$container.removeClass("combobox-disabled")},parse:function(){var f=this,i={},r=[],t=!1,u="";return this.$source.find("option").each(function(){var e=n(this);if(e.val()===""){f.options.placeholder=e.text();return}i[e.text()]=e.val();r.push(e.text());e.prop("selected")&&(t=e.text(),u=e.val())}),this.map=i,t&&(this.$element.val(t),this.$target.val(u),this.$container.addClass("combobox-selected"),this.selected=!0),r},transferAttributes:function(){this.options.placeholder=this.$source.attr("data-placeholder")||this.options.placeholder;this.$element.attr("placeholder",this.options.placeholder);this.$target.prop("name",this.$source.prop("name"));this.$target.val(this.$source.val());this.$element.prop("name","autocomplete"+this.$source.prop("name"));this.$element.attr("required",this.$source.attr("required"));this.$element.attr("data-msg-required",this.$source.attr("data-msg-required"));this.$element.attr("rel",this.$source.attr("rel"));this.$element.attr("title",this.$source.attr("title"));this.$element.attr("class",this.$source.attr("class"));this.$element.attr("tabindex",this.$source.attr("tabindex"));this.$source.removeAttr("tabindex");this.$source.removeAttr("name");this.$source.attr("disabled")!==undefined&&this.disable()},select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).trigger("change"),this.$target.val(this.map[t]).trigger("change"),this.$source.val(this.map[t]).trigger("change"),this.$container.addClass("combobox-selected"),this.selected=!0,n.fn.valid&&this.$element.valid(),this.hide()},updater:function(n){return n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show();n(".dropdown-menu").on("mousedown",n.proxy(this.scrollSafety,this));return this.shown=!0,this},hide:function(){this.$menu.hide();n(".dropdown-menu").off("mousedown",n.proxy(this.scrollSafety,this));this.$element.on("blur",n.proxy(this.blur,this));return this.shown=!1,this},lookup:function(){return this.query=this.$element.val(),this.process(this.source)},lookupAll:function(){return this.query="",this.process(this.source)},process:function(t){var i=this;return(t=n.grep(t,function(n){return i.matcher(n)}),t=this.sorter(t),!t.length)?this.shown?this.hide():this:this.render(t.slice(0,this.options.items)).show()},template:function(){return this.options.bsVersion=="2"?'<div class="combobox-container"><input type="hidden" /> <div class="input-append"> <input type="text" autocomplete="off" /> <span class="add-on dropdown-toggle" data-dropdown="dropdown"> <span class="caret"/> <i class="icon-remove"/> <\/span> <\/div> <\/div>':'<div class="combobox-container"> <input type="hidden" /> <div class="input-group"> <input type="text" autocomplete="off" /> <span class="btn input-group-addon dropdown-toggle" data-dropdown="dropdown"> <span class="caret" /> <span class="glyphicon glyphicon-remove" /> <\/span> <\/div> <\/div>'},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var i=[],r=[],u=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):u.push(t):i.push(t);return i.concat(r,u)},highlighter:function(n){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).attr("data-value",r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},toggle:function(){this.disabled||(this.shown?this.hide():(this.$element.focus(),this.lookupAll()))},scrollSafety:function(n){n.target.tagName=="UL"&&this.$element.off("blur")},clearElement:function(){this.$element.val("").focus()},clearTarget:function(){this.$source.val("");this.$target.val("");this.$container.removeClass("combobox-selected");this.selected=!1},triggerChange:function(){this.$source.trigger("change")},refresh:function(){this.source=this.parse();this.options.items=this.source.length},listen:function(){this.$element.on("focus",n.proxy(this.focus,this)).on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this)).on("mouseleave","li",n.proxy(this.mouseleave,this));this.$button.on("click",n.proxy(this.toggle,this))},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 39:case 38:case 37:case 36:case 35:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget();this.lookup()}n.stopPropagation();n.preventDefault()},focus:function(){this.focused=!0},blur:function(){var t=this,n;this.focused=!1;n=this.$element.val();this.selected||n===""||(this.$element.val(""),this.$source.val("").trigger("change"),this.$target.val("").trigger("change"));!this.mousedover&&this.shown&&setTimeout(function(){t.hide()},200)},click:function(n){n.stopPropagation();n.preventDefault();this.select();this.$element.focus()},mouseenter:function(t){this.mousedover=!0;this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1}};n.fn.combobox=function(i){return this.each(function(){var u=n(this),r=u.data("combobox"),f=typeof i=="object"&&i;r||u.data("combobox",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.combobox.defaults={bsVersion:"3",menu:'<ul class="typeahead typeahead-long dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>'};n.fn.combobox.Constructor=t}(window.jQuery);minScreen=767;$(window).width()>minScreen&&$(".combobox").combobox();var selectedDistrictId,selectedWardId,selectedStreetId;$("select[id$=ProvinceId]").change(function(){var n,t;return $(this).val()>0&&(n=$("#"+this.id.replace("ProvinceId","DistrictIds"),$(this).closest("form")),n.length>0&&(n.siblings(".combobox-container").children("input").val(""),n.change(),t={provinceId:$(this).val()},$(this).hasClass("restricted")&&(t.userId=$(this).attr("userid")),$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetDistrictsForJson",data:t,success:function(t){var i=n.val();n.empty().append("<option value=''>--Quận / Huyện--<\/option>");$.each(t.list,function(t,i){n.append("<option value="+i.Value+">"+i.Text+"<\/option>")});selectedDistrictId!=null?n.val(selectedDistrictId):n.val(i);n.change();$(window).width()>minScreen&&n.combobox("refresh");$("#WardIds, #StreetIds, #DirectionIds").closest(".form-group").hide()},error:function(){n.empty().append("<option value=''><\/option>").change();$(window).width()>minScreen&&n.combobox("refresh")}}))),!1});$("select[id$=DistrictIds]").change(function(){var t=$("#"+this.id.replace("DistrictIds","WardIds"),$(this).closest("form")),n=$("#"+this.id.replace("DistrictIds","StreetIds"),$(this).closest("form")),i=$("#"+this.id.replace("DistrictIds","ApartmentId"),$(this).closest("form")),r;return $(this).val()?(t.length>0&&(t.children("option:first").text("[Loading..]"),t.siblings(".combobox-container").children("input").val(""),$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetWardsForJson",data:{districtId:$(this).val()},success:function(n){var i=t.val();t.empty().append("<option value=''>--Chọn tất cả phường / Xã--<\/option>");$.each(n.list,function(n,i){t.append("<option value="+i.Value+">"+i.Text+"<\/option>")});selectedWardId!=null?t.val(selectedWardId):t.val(i);t.change();$(window).width()>minScreen&&t.combobox("refresh")},error:function(){t.empty().append("<option value=''><\/option>").change();$(window).width()>minScreen&&t.combobox("refresh")}})),n.length>0&&(n.children("option:first").text("[Loading..]"),n.siblings(".combobox-container").children("input").val(""),r="/RealEstate.Admin/Home/GetStreetsForJson",n.hasClass("all-street")&&(r="/RealEstate.Admin/Home/GetAllStreetsForJson"),$.ajax({type:"get",dataType:"",url:r,data:{districtId:$(this).val()},success:function(t){var i=n.val();n.empty().append("<option value=''>--Chọn tất cả đường--<\/option>");$.each(t.list,function(t,i){n.append("<option value="+i.Value+">"+i.Text+"<\/option>")});selectedStreetId!=null?n.val(selectedStreetId):n.val(i);n.change();$(window).width()>minScreen&&n.combobox("refresh")},error:function(){n.empty().append("<option value=''><\/option>").change();$(window).width()>minScreen&&n.combobox("refresh")}})),i.length>0&&(i.children("option:first").text("[Loading..]"),i.siblings(".combobox-container").children("input").val(""),$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetApartmentsForJson",data:{districtId:$(this).val()},success:function(n){i.empty().append("<option value=''>--Chọn tất cả dự án--<\/option>");$.each(n.list,function(n,t){i.append("<option value="+t.Value+">"+t.Text+"<\/option>")});i.change();$(window).width()>minScreen&&i.combobox("refresh")},error:function(){i.empty().append("<option value=''><\/option>").change();$(window).width()>minScreen&&i.combobox("refresh")}}))):(t.length>0&&(t.empty().append("<option value=''><\/option>").change(),$(window).width()>minScreen&&t.combobox("refresh")),n.length>0&&(n.empty().append("<option value=''><\/option>").change(),$(window).width()>minScreen&&n.combobox("refresh")),i.length>0&&(i.empty().append("<option value=''><\/option>").change(),$(window).width()>minScreen&&i.combobox("refresh"))),!1});$("select[id$=ApartmentId]").change(function(){var n=$("#"+this.id.replace("ApartmentId","ApartmentBlockId"),$(this).closest("form")),t=$("#oldApartmentBlockId").val();return $(this).val()?n.length>0&&(n.children("option:first").text("[Loading..]"),n.siblings(".combobox-container").children("input").val(""),$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetApartmentBlocksForJson",data:{apartmentId:$(this).val()},success:function(i){n.empty().append("<option value=''>-- Vui lòng chọn --<\/option>");$.each(i.list,function(t,i){n.append("<option value="+i.Value+">"+i.Text+"<\/option>")});n.val(t);n.change();$(window).width()>minScreen&&n.combobox("refresh")},error:function(){n.empty().append("<option value=''>-- Vui lòng chọn --<\/option>").change();$(window).width()>minScreen&&n.combobox("refresh")}})):n.length>0&&(n.empty().append("<option value=''>-- Vui lòng chọn --<\/option>").change(),$(window).width()>minScreen&&n.combobox("refresh")),!1});$(".mobile-toggle").click(function(){$(".form-search-mobile").slideToggle("slow")})}
//# sourceMappingURL=BootstrapComboboxFilterOnMobile.min.js.map
