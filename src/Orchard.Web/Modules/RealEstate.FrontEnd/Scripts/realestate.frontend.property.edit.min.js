function getContactInfo(){$.ajax({type:"post",dataType:"",url:"/RealEstate.UserControlPanel/User/GetProfile",data:{__RequestVerificationToken:antiForgeryToken},success:function(n){n.success==!0&&($("#ContactName").length>0&&$("#ContactName").val().length==0&&n._name.length>0&&$("#ContactName").val(n._name),$("#ContactPhone").length>0&&$("#ContactPhone").val().length==0&&n._number.length>0&&$("#ContactPhone").val((n._name.length>0?n._name+" ":"")+n._number),$("#ContactEmail").length>0&&$("#ContactEmail").val().length==0&&n._email.length>0&&$("#ContactEmail").val(n._email),$("#ContactAddress").length>0&&$("#ContactAddress").val().length==0&&n._address.length>0&&$("#ContactAddress").val(n._address))},error:function(){}})}function toggleEstimate(n){n==!0?($("#lbAlleyWidth1").html('<span class="text-error">*<\/span> Lần rẽ thứ nhất (Hẻm đầu tiên) rộng:'),$("#AlleyWidth1").attr("required","True"),$(".estiametion-mode").show(),$("#linkEstimate").parent().hide()):($("#lbAlleyWidth1").text("Hẻm rộng:"),$("#AlleyWidth1").removeAttr("required"),$(".estiametion-mode").hide());$("#LocationCssClass").change()}function loadTypeCssClass(){$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetPropertyTypesForJson",data:{adsTypeCssClass:$("#AdsTypeCssClass").val(),typeGroupCssClass:$("#TypeGroupCssClass").val()},success:function(n){var t=$("#TypeId").val();$("#TypeId").empty().append("<option value=''>-- Vui lòng chọn --<\/option>");$.each(n.list,function(n,t){$("#TypeId").append("<option value="+t.Value+">"+t.Text+"<\/option>")});$("#TypeId").val(t).change()},error:function(n,t,i){$("#TypeId").empty().append("<option value=''>-- Vui lòng chọn --<\/option>");console.log(i)}})}function validateUserPropertyAddress(){var e=parseInt($("#Id").html());isNaN(e)&&(e=0);var o=parseInt($("#ProvinceId").val()),r=parseInt($("#DistrictId").val()),u=parseInt($("#WardId").val()),f=parseInt($("#StreetId").val()),n=parseInt($("#ApartmentId").val());isNaN(n)&&(n=0);var t=$("#AddressNumber").val(),s=$("#AddressCorner").is(":visible")?$("#AddressCorner").val():"",i=$("#ApartmentNumber").val(),h=$("#AdsTypeCssClass").val();return r>0&&(u>0&&f>0&&t!=""&&t!=null||n>0&&i!=""&&i!=null)&&$.ajax({type:"post",dataType:"",url:"/RealEstate.Admin/Home/AjaxUserValidateAddress",data:{id:e,provinceId:o,districtId:r,wardId:u,streetId:f,apartmentId:n,addressNumber:t,addressCorner:s,apartmentNumber:i,adsTypeCssClass:h,__RequestVerificationToken:antiForgeryToken},success:function(e){if(e.exists){if((e.propertyEstimate||e.propertyExchange)&&$("#formUpdateId").length>0)return getSimilarInformation(o,r,u,f,n,t,s,i),!1;var h='<div id="exists" class="message message-Warning">Bạn đã có BĐS: <a href="'+e.link+'">'+e.address+"<\/a> "+e.info+"<\/div>";$("#messages").length==0&&$("#layout-main").prepend('<div id="messages"><div class="zone zone-messages"><\/div><\/div>');$("#messages .zone-messages").prepend(h);$(".primaryAction").attr("disabled","disabled").addClass("disabled");confirm("BĐS: '"+e.address+"' đã có trong kho dữ liệu.\nBạn sẽ được tự động chuyển sang trang chỉnh sửa thông tin BĐS.")&&($("#overlay").show(),location=e.link)}else $("#messages #exists").remove(),$(".primaryAction").removeAttr("disabled").removeClass("disabled"),e.existsInternal&&getSimilarInformation(o,r,u,f,n,t,s,i)},error:function(){}}),!1}function getSimilarInformation(n,t,i,r,u,f,e,o){$.ajax({type:"post",dataType:"",url:"/ajax/RealEstate.FrontEnd/PropertySearch/LoadSameProperty",data:{provinceId:n,districtId:t,wardId:i,streetId:r,apartmentId:u,addressNumber:f,addressCorner:e,apartmentNumber:o,__RequestVerificationToken:antiForgeryToken},success:function(n){var t,i;if(n.success==!0&&(t=!1,n.TypeId>0&&$("#TypeId").length>0&&($("#TypeId").val(n.TypeId).change(),t=!0),n.LegalStatusId>0&&$("#LegalStatusId").length>0&&$("#LegalStatusId").val()==""&&($("#LegalStatusId").val(n.LegalStatusId).change(),t=!0),n.DirectionId>0&&$("#DirectionId").length>0&&$("#DirectionId").val()==""&&($("#DirectionId").val(n.DirectionId).change(),t=!0),n.LocationCssClass!=""&&$("#LocationCssClass").length>0&&$("#LocationCssClass").val()==""&&($("#LocationCssClass").val(n.LocationCssClass).change(),t=!0),n.DistanceToStreet>0&&$("#DistanceToStreet").length>0&&$("#DistanceToStreet").val()==""&&($("#DistanceToStreet").val(n.DistanceToStreet),t=!0),n.AlleyTurns>0&&$("#AlleyTurns").length>0&&$("#AlleyTurns").val()==""&&($("#AlleyTurns").val(n.AlleyTurns).change(),t=!0),n.AlleyWidth1>0&&$("#AlleyWidth1").length>0&&$("#AlleyWidth1").val()==""&&($("#AlleyWidth1").val(n.AlleyWidth1),t=!0),n.AlleyWidth2>0&&$("#AlleyWidth2").length>0&&$("#AlleyWidth2").val()==""&&($("#AlleyWidth2").val(n.AlleyWidth2),t=!0),n.AlleyWidth3>0&&$("#AlleyWidth3").length>0&&$("#AlleyWidth3").val()==""&&($("#AlleyWidth3").val(n.AlleyWidth3),t=!0),n.AlleyWidth4>0&&$("#AlleyWidth4").length>0&&$("#AlleyWidth4").val()==""&&($("#AlleyWidth4").val(n.AlleyWidth4),t=!0),n.AlleyWidth5>0&&$("#AlleyWidth5").length>0&&$("#AlleyWidth5").val()==""&&($("#AlleyWidth5").val(n.AlleyWidth5),t=!0),n.AlleyWidth6>0&&$("#AlleyWidth6").length>0&&$("#AlleyWidth6").val()==""&&($("#AlleyWidth6").val(n.AlleyWidth6),t=!0),n.StreetWidth>0&&$("#StreetWidth").length>0&&$("#StreetWidth").val()==""&&($("#StreetWidth").val(n.StreetWidth),t=!0),n.AreaTotal>0&&$("#AreaTotal").length>0&&$("#AreaTotal").val()==""&&($("#AreaTotal").val(n.AreaTotal),t=!0),n.AreaTotalWidth>0&&$("#AreaTotalWidth").length>0&&$("#AreaTotalWidth").val()==""&&($("#AreaTotalWidth").val(n.AreaTotalWidth),t=!0),n.AreaTotalLength>0&&$("#AreaTotalLength").length>0&&$("#AreaTotalLength").val()==""&&($("#AreaTotalLength").val(n.AreaTotalLength),t=!0),n.AreaTotalBackWidth>0&&$("#AreaTotalBackWidth").length>0&&$("#AreaTotalBackWidth").val()==""&&($("#AreaTotalBackWidth").val(n.AreaTotalBackWidth),t=!0),n.AreaLegal>0&&$("#AreaLegal").length>0&&$("#AreaLegal").val()==""&&($("#AreaLegal").val(n.AreaLegal),t=!0),n.AreaLegalWidth>0&&$("#AreaLegalWidth").length>0&&$("#AreaLegalWidth").val()==""&&($("#AreaLegalWidth").val(n.AreaLegalWidth),t=!0),n.AreaLegalLength>0&&$("#AreaLegalLength").length>0&&$("#AreaLegalLength").val()==""&&($("#AreaLegalLength").val(n.AreaLegalLength),t=!0),n.AreaLegalBackWidth>0&&$("#AreaLegalBackWidth").length>0&&$("#AreaLegalBackWidth").val()==""&&($("#AreaLegalBackWidth").val(n.AreaLegalBackWidth),t=!0),n.AreaIlegalRecognized>0&&$("#AreaIlegalRecognized").length>0&&$("#AreaIlegalRecognized").val()==""&&($("#AreaIlegalRecognized").val(n.AreaIlegalRecognized),t=!0),n.AreaUsable>0&&$("#AreaUsable").length>0&&$("#AreaUsable").val()==""&&($("#AreaUsable").val(n.AreaUsable),t=!0),n.AreaResidential>0&&$("#AreaResidential").length>0&&$("#AreaResidential").val()==""&&($("#AreaResidential").val(n.AreaResidential),t=!0),n.AreaConstruction>0&&$("#AreaConstruction").length>0&&$("#AreaConstruction").val()==""&&($("#AreaConstruction").val(n.AreaConstruction),t=!0),n.AreaConstructionFloor>0&&$("#AreaConstructionFloor").length>0&&$("#AreaConstructionFloor").val()==""&&($("#AreaConstructionFloor").val(n.AreaConstructionFloor),t=!0),n.TypeConstructionId>0&&$("#TypeConstructionId").length>0&&$("#TypeConstructionId").val()==""&&($("#TypeConstructionId").data("autofill",n.TypeConstructionId).val(n.TypeConstructionId).change(),t=!0),n.Floors>0&&$("#Floors").length>0&&$("#Floors").val()==""&&($("#Floors").val(n.Floors),t=!0),n.FloorsCount!=0&&$("#FloorsCount").length>0&&($("#FloorsCount").val()==""||$("#FloorsCount").val()=="0")&&($("#FloorsCount").val(n.FloorsCount).change(),t=!0),n.Bedrooms>0&&$("#Bedrooms").length>0&&$("#Bedrooms").val()==""&&($("#Bedrooms").val(n.Bedrooms),t=!0),n.Bathrooms>0&&$("#Bathrooms").length>0&&$("#Bathrooms").val()==""&&($("#Bathrooms").val(n.Bathrooms),t=!0),n.InteriorId>0&&$("#InteriorId").length>0&&$("#InteriorId").val()==""&&($("#InteriorId").val(n.InteriorId).change(),t=!0),n.RemainingValue>0&&$("#RemainingValue").length>0&&$("#RemainingValue").val()==""&&($("#RemainingValue").val(n.RemainingValue),t=!0),n.HaveBasement==!0&&($("#HaveBasement").prop("checked",!0),t=!0),n.HaveMezzanine==!0&&($("#HaveMezzanine").prop("checked",!0),t=!0),n.HaveTerrace==!0&&($("#HaveTerrace").prop("checked",!0),t=!0),n.HaveGarage==!0&&($("#HaveGarage").prop("checked",!0),t=!0),n.HaveElevator==!0&&($("#HaveElevator").prop("checked",!0),t=!0),n.HaveSwimmingPool==!0&&($("#HaveSwimmingPool").prop("checked",!0),t=!0),n.ApartmentFloors>0&&$("#ApartmentFloors").length>0&&$("#ApartmentFloors").val()==""&&($("#ApartmentFloors").val(n.ApartmentFloors),t=!0),n.ApartmentElevators>0&&$("#ApartmentElevators").length>0&&$("#ApartmentElevators").val()==""&&($("#ApartmentElevators").val(n.ApartmentElevators),t=!0),n.ApartmentBasements>0&&$("#ApartmentBasements").length>0&&$("#ApartmentBasements").val()==""&&($("#ApartmentBasements").val(n.ApartmentBasements),t=!0),t==!0&&(alert("Hệ thống đã tự động cập nhật thông tin tham khảo về BĐS này. Bạn có thể sửa lại cho chính xác."),i=$("#AreaLegal"),i.val()==null||i.val()==0))){var u=$("#AreaLegalWidth"),r=$("#AreaLegalBackWidth"),f=$("#AreaLegalLength"),e=(Number(u.val())+Number(r.val()))/2*f.val();(r.val()==null||r.val()==0)&&(e=Number(u.val())*Number(f.val()));i.val(e)}},error:function(){}})}function getURLParameter(n){return decodeURI((RegExp(n+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}function removeByValue(n,t){for(var i=0;i<n.length;i++)if(n[i]==t){n.splice(i,1);break}}function DocGiaRao(){var i="",n=parseFloat($("#PriceProposed").val().replace(/,/g,"")),r,t;if(n==""||n=="-1"||isNaN(n))$("#PriceInWords").html("");else{r=$("#PaymentMethodId option:selected").val();t=$("#PaymentMethodId option:selected").text();switch(r){case"56":n=n*1e9;t="đồng";break;case"57":n=n*1e6;t="đồng";break;case"58":n=n*1e3;t="đồng";break;case"60":n=n;t="USD";break;case"134122":n=n*1e6;t="USD"}n=parseFloat(n)+parseFloat(.009);numberStr=n.toString();n=numberStr.substring(0,numberStr.indexOf("."));i=DocTienBangChu(n)+" "+t+" / "+$("#PaymentUnitId option:selected").text();$("#PriceInWords").html(i)}}function DocSo3ChuSo(n){var u=parseInt(n/100),t=parseInt(n%100/10),r=n%10,i="";if(u==0&&t==0&&r==0)return"";u!=0&&(i+=ChuSo[u]+" trăm ",t==0&&r!=0&&(i+=" linh "));t!=0&&t!=1&&(i+=ChuSo[t]+" mươi",t==0&&r!=0&&(i=i+" linh "));t==1&&(i+=" mười ");switch(r){case 1:i+=t!=0&&t!=1?" mốt ":ChuSo[r];break;case 5:i+=t==0?ChuSo[r]:" lăm ";break;default:r!=0&&(i+=ChuSo[r])}return i}function DocTienBangChu(n){var e=0,u=0,i=0,r="",f="",t=[];if(n<0)return"Số tiền âm !";if(n==0)return"Không đồng !";if(i=n>0?n:-n,n>8999999999999999)return"Số quá lớn!";for(t[5]=Math.floor(i/1e15),isNaN(t[5])&&(t[5]="0"),i=i-parseFloat(t[5].toString())*1e15,t[4]=Math.floor(i/1e12),isNaN(t[4])&&(t[4]="0"),i=i-parseFloat(t[4].toString())*1e12,t[3]=Math.floor(i/1e9),isNaN(t[3])&&(t[3]="0"),i=i-parseFloat(t[3].toString())*1e9,t[2]=parseInt(i/1e6),isNaN(t[2])&&(t[2]="0"),t[1]=parseInt(i%1e6/1e3),isNaN(t[1])&&(t[1]="0"),t[0]=parseInt(i%1e3),isNaN(t[0])&&(t[0]="0"),e=t[5]>0?5:t[4]>0?4:t[3]>0?3:t[2]>0?2:t[1]>0?1:0,u=e;u>=0;u--)f=DocSo3ChuSo(t[u]),r+=f,t[u]>0&&(r+=Tien[u]),u>0&&f.length>0&&(r+=",");return r.substring(r.length-1)==","&&(r=r.substring(0,r.length-1)),r.substring(1,2).toUpperCase()+r.substring(2)}function checkIsValidVip(){var n=$("#DistrictId").val(),i=$("#AdsTypeCssClass").val(),t=!1;return n!=null&&n!=""&&i=="ad-selling"&&[313,315,317,322,323,328,329,326,330].indexOf(parseInt(n))>-1&&(t=!0),t}function ResetDateVip(n){var u,r,f,e,o,i,h,a,c;try{if($(".date-vip-start").val().length==0&&$(".date-vip-start").val(UTCDateTimeToVNDateTime(new Date,"/")),$(".date-vip-end").val().length==0&&(u=new Date,u.setMonth(u.getMonth()+1),$(".date-vip-end").val(UTCDateTimeToVNDateTime(u,"/"))),r=new Date(VNDateTimeToUTCDateTime($(".date-vip-start").val(),"/")),f=new Date(VNDateTimeToUTCDateTime($(".date-vip-end").val(),"/")),$(".date-vip-end").attr("disabled")!=undefined,e=new Date(r),o=new Date(r),e.setMonth(e.getMonth()+6),i=new Date(f),h=checkIsValidVip(),n==1||n==3){var l=parseInt($("#AdsTypeVIP").val()),t=new Date(r),y=parseInt($("#Amount").val()),s=0;switch(l){case 0:h?(t.setDate(t.getDate()+15),s=unitPriceArray[0]):t.setDate(t.getDate()+30);break;case 1:t.setDate(t.getDate()+10);s=unitPriceArray[1];break;case 2:t.setDate(t.getDate()+5);s=unitPriceArray[2];break;case 3:t.setDate(t.getDate()+3);s=unitPriceArray[3]}a=GetTotalDay(r,t);n==1&&$(".date-vip-end").val(UTCDateTimeToVNDateTime(t,"/"));$(".date-vip-end").datepicker("option","minDate",t)}return o.setDate(o.getDate()+1),i.setSeconds(i.getSeconds()+86399),i.setDate(i.getDate()-1),i<new Date&&(i=new Date,f=o,$(".date-vip-end").val(UTCDateTimeToVNDateTime(f,"/"))),$(".date-vip-end").datepicker("option","maxDate",e),$(".date-vip-start").datepicker("option","maxDate",new Date),c=n!=3?!0:!1,GetAbsAmount(n,c)}catch(v){parseInt($("#AdsTypeVIP").val())==0&&$(".paymentAmount").html("Miễn phí");console.log(v)}}function VNDateTimeToUTCDateTime(n,t){try{var r=n.toString(),i=r.split(t);return new Date(i[2]+"/"+i[1]+"/"+i[0]).toDateString()}catch(f){return new Date}}function UTCDateTimeToVNDateTime(n,t){var i="";try{i=new Date(n)}catch(f){i=new Date}var r=i.getDate()<9?"0"+i.getDate():i.getDate(),u=i.getMonth()<9?"0"+(i.getMonth()+1):i.getMonth()+1;return r+t+u+t+i.getFullYear()}function GetAbsAmount(n,t){var i=new Date(VNDateTimeToUTCDateTime($(".date-vip-start").val(),"/")),u=new Date(VNDateTimeToUTCDateTime($(".date-vip-end").val(),"/")),o,h;i>u&&(i.setDate(i.getDate()+1),$(".date-vip-end").val(UTCDateTimeToVNDateTime(i,"/")));var c=GetTotalDay(i,u),l=parseInt($("#AdsTypeVIP").val()),a=$("#statusProperty").val(),v=$("#oldAdsTypeVip").val(),r=0,f=0,e=checkIsValidVip();if(e){if(o=parseInt($("#Amount").val()),a==0){var s=$("#oldPostingDates").val(),y=Number(v),p=unitPriceArray[y];if(f=s>=Date()?Number(s)*p:0,h=unitPriceArray[l],r=c*h,$(".paymentAmount").html("("+r+") "+DocTienBangChu(r)),r>Number(f+o)&&t)return e?alert("Khu vực có thu phí:\n- Tin thường 1000 vnd/ngày \n- Vip 1: 5000 vnd/ngày \n- Vip 2: 3000 vnd/ngày \n- Vip 3: 1500 vnd/ngày \n- Vui lòng nạp tiền để đăng tin này"):alert("Số tiền không đủ để đăng tin."),n==4,!1}}else $(".paymentAmount").html("Miễn phí")}function GetTotalDay(n,t){var i=t-n;return i=i/24,i=i/60,i=i/60,i/1e3}function AreaContructionChange(n){var u=$("#HaveBasement",$(n).closest("form")),f=$("#HaveMezzanine",$(n).closest("form")),e=$("#HaveTerrace",$(n).closest("form")),t=0,i,r;return u.is(":checked")&&(t+=1),f.is(":checked")&&(t+=1),e.is(":checked")&&(t+=1),i=Number($("#FloorsCount",$(n).closest("form")).val()),r=$("#AreaConstruction",$(n).closest("form")),i==-1&&(i=Number($("#Floors").val())),(i+1+Number(t))*r.val()}var ChuSo=[" không "," một "," hai "," ba "," bốn "," năm "," sáu "," bảy "," tám "," chín "],Tien=[""," nghìn"," triệu"," tỷ"," nghìn tỷ"," triệu tỷ"];$("#AdsTypeCssClass").attr("data-msg-required","Bạn phải chọn loại giao dịch");$("#TypeGroupId").attr("data-msg-required","Bạn phải chọn loại bất động sản");$("#TypeGroupCssClass").attr("data-msg-required","Bạn phải chọn nhóm bất động sản");$("#TypeId").attr("data-msg-required","Bạn phải chọn loại bất động sản");$("#TypeConstructionId").attr("data-msg-required","Bạn phải chọn loại công trình xây dựng");$("#FloorsCount").attr("data-msg-required","Bạn phải chọn số lầu");$("#ProvinceId,[name$=ProvinceId]").attr("data-msg-required","Bạn phải chọn Tỉnh / Thành Phố");$("#DistrictId,[name$=DistrictId]").attr("data-msg-required","Bạn phải chọn Quận / Huyện");$("#WardId,[name$=WardId]").attr("data-msg-required","Bạn phải chọn Phường / Xã");$("#AddressNumber").attr("data-msg-required","Bạn phải nhập Số nhà");$("#LocationCssClass").attr("data-msg-required","Bạn phải chọn vị trí BĐS");$("#DistanceToStreet,#AlleyTurns,#AlleyWidth1,#AlleyWidth2,#AlleyWidth3,#AlleyWidth4,#AlleyWidth5,#AlleyWidth6,#AlleyWidth7,#AlleyWidth8,#AlleyWidth9,#AreaUsable").attr("data-msg-required","Vui lòng nhập");$("#AreaTotalWidth").attr("data-msg-required","Bạn phải nhập chiều ngang khuôn viên đất hoặc chỉ cần nhập Tổng DT.");$("#AreaTotalLength").attr("data-msg-required","Bạn phải nhập chiều dài khuôn viên đất hoặc chỉ cần nhập Tổng DT.");$("#AreaLegalWidth").attr("data-msg-required","Bạn phải nhập chiều ngang phù hợp quy hoạch.");$("#AreaLegalLength").attr("data-msg-required","Bạn phải nhập chiều dài phù hợp quy hoạch.");$("#ContactPhone").attr("data-msg-required","Bạn phải nhập tên + điện thoại");$(document).ready(function(){if($.fn.validate)var n=$(".formvalidate").validate({errorClass:"text-error"});$(".show-share-face").length>0&&$(".check-share-face").html($(".show-share-face"))});$(function(){function n(){$("#ProvinceId",$("#AddressCorner").closest("form")).children("option:selected").text()=="Hà Nội"?$("#AddressCorner").closest(".form-group").show():$("#AddressCorner").closest(".form-group").hide()}function e(){$("#ChkOtherProvinceName").is(":checked")&&($("#ProvinceId").val("").change().next().hide().next().hide(),$("#OtherProvinceName").show());$("#ChkOtherDistrictName").is(":checked")&&($("#DistrictId").next().hide().next().hide(),$("#OtherDistrictName").show());$("#ChkOtherWardName").is(":checked")&&($('input[name="WardId"]').next().hide().next().hide(),$("#OtherWardName").show());$("#ChkOtherStreetName").is(":checked")&&($('input[name="StreetId"]').next().hide().next().hide(),$("#OtherStreetName").show());$("#ChkOtherProjectName").is(":checked")&&($('input[name="ApartmentId"]').next().hide().next().hide(),$("#OtherProjectName").show())}function t(){var n=$("#FloorsCount");$(n).val()==-1?($("#Floors").closest(".form-group").show(),$("#Floors").focus()):$("#Floors").val($(n).val()).closest(".form-group").hide();$("#Floors").change()}var r,u,f;$("#PriceProposed").val()<=0&&$("#PriceProposed").val("");n();$("#ProvinceId",$("#AddressCorner").closest("form")).change(function(){n()});$("#ChkOtherDistrictName").change(function(){$(this).is(":checked")?($("#DistrictId").val("").change().next().hide().next().hide(),$("#OtherDistrictName").show(),$("#ChkOtherWardName").attr("checked",!0).change(),$("#ChkOtherStreetName").attr("checked",!0).change()):($("#DistrictId").val("").change().next().show().next().show(),$("#OtherDistrictName").hide(),$("#ChkOtherWardName").attr("checked",!1).change(),$("#ChkOtherStreetName").attr("checked",!1).change())});$("#ChkOtherWardName").change(function(){$(this).is(":checked")?($('input[name="WardId"]').val("").next().hide().next().hide(),$("#OtherWardName").show()):($('input[name="WardId"]').val("").next().show().next().show(),$("#OtherWardName").hide())});$("#ChkOtherStreetName").change(function(){$(this).is(":checked")?($('input[name="StreetId"]').val("").next().hide().next().hide(),$("#OtherStreetName").show()):($('input[name="StreetId"]').val("").next().show().next().show(),$("#OtherStreetName").hide())});$("#ChkOtherProjectName").change(function(){$(this).is(":checked")?($('input[name="ApartmentId"]').val("").next().hide().next().hide(),$("#OtherProjectName").show()):($('input[name="ApartmentId"]').val("").next().show().next().show(),$("#OtherProjectName").hide())});$("#ApartmentId").change(function(){var i=$("#"+this.id.replace("ApartmentId","WardId"),$(this).closest("form")),r=$("#"+this.id.replace("ApartmentId","StreetId"),$(this).closest("form"));if($(this).val()>0){var n=$(this).val(),u=$("#oldAprartmentId").val(),t=$("#Id").text();$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetApartmentInfoForJson",data:{apartmentId:$(this).val(),propertyId:t},success:function(f){$(".apartment_"+u).remove();$("#oldAprartmentId").val(n);$.each(f.apartmentList,function(i,r){if(r.Path!=""){var u="",f=r.Path.split("/");r.IsAvatar&&(u='checked="checked"');$(".picture_house").append('<li class="managerimages apartment_'+n+'" data-id="'+r.Id+'" data-property-id="'+t+'">                                     <img alt="'+f[f.length-1]+'" src="'+r.Path+'?width=100&amp;height=125" width="110" class="img-thumbnail" />                                     <div class="checkbox">                                         <label title="Cho phép hiện hình"><input type="checkbox" name="imgPublished" checked="checked" />Hiện&nbsp;&nbsp;<\/label>                                     <\/div>                                     <div class="radio">                                         <label><input type="radio" name="avatar" '+u+">Ảnh Chính<\/label>                                     <\/div>                                 <\/li>")}});f.apartmentWardId==0?i.siblings(".combobox-container").children("input").val(""):$("#WardId").val(f.apartmentWardId).combobox("refresh").change();f.apartmentStreetId==0?r.siblings(".combobox-container").children("input").val(""):$("#StreetId").val(f.apartmentStreetId).combobox("refresh").change();$("#AddressNumber").val(f.apartmentAddressNumber);$("#ApartmentFloors").val(f.apartmentFloors);$("#ApartmentElevators").val(f.apartmentElevators);$("#ApartmentBasements").val(f.apartmentBasements);$("#Content").val(f.apartmentDescription);$("#ApartmentTradeFloors").val(f.apartmentTradeFloors);$(".apartment-adv-Childcare").prop("checked",f.apartmentHaveChildcare);$(".apartment-adv-Park").prop("checked",f.apartmentHavePark);$(".apartment-adv-SwimmingPool").prop("checked",f.apartmentHaveSwimmingPool);$(".apartment-adv-SuperMarket").prop("checked",f.apartmentHaveSuperMarket);$(".apartment-adv-SportCenter").prop("checked",f.apartmentHaveSportCenter);$(".apartment-adv-Hospital").prop("checked",f.apartmentHaveHospital);$(".apartment-adv-PublicArea").prop("checked",f.apartmentHavePublicArea)},error:function(n,t,i){$("#ApartmentFloors,#ApartmentElevators,#ApartmentBasements").val("");$(".apartment-adv-Childcare,.apartment-adv-Park,.apartment-adv-SwimmingPool,.apartment-adv-SuperMarket,.apartment-adv-SportCenter").prop("checked",!1);console.log(i)}})}}).change();e();$("#AdsTypeCssClass").change(function(){$("#PaymentMethodId option").removeAttr("selected");$(this).val()=="ad-leasing"||$(this).val()=="ad-renting"?($("#PaymentMethodId option:contains(Triệu):first").attr("selected","selected"),$("#PaymentMethodCssClass").val("pm-vnd-m")):($("#PaymentMethodId option:contains(Tỷ)").attr("selected","selected"),$("#PaymentMethodCssClass").val("pm-vnd-b"));$("#TypeGroupCssClass").val()=="gp-house"&&loadTypeCssClass()}).change();$("#TypeGroupCssClass").change(function(){$("#TypeGroupCssClass").val()!=""&&loadTypeCssClass();$("#TypeGroupCssClass").val()=="gp-apartment"&&($("#AreaUsable").removeAttr("required"),$(".not-require").remove())}).change();$("#TypeId").change(function(){var n=$(this).val();n==231||n==""?$(".constructionInfo").hide():($(".constructionInfo").show(),$(this).val()!=238?($("#FloorsCount").find("option:first").val(0),$("#FloorsCount").removeAttr("required"),$("#FloorsCount").closest(".form-group").children("label").text("Số lầu: ")):($("#FloorsCount").find("option:first").val(""),$("#FloorsCount").attr("required","required"),$("#FloorsCount").closest(".form-group").children("label").prepend('<span class="text-error">*<\/span>')));n>0&&$("#CurrentTypeGroupCssClass").length>0&&$("#TypeGroupCssClass").val()!=$("#CurrentTypeGroupCssClass").text()&&$("[name='submit.Save']").click();$("#Floors").change();t()}).change();$("#FloorsCount").change(function(){t();var i=$("#AreaConstruction",$(this).closest("form")),r=$("#AreaConstructionFloor",$(this).closest("form")),n=AreaContructionChange($(this));n!=0&&(r.val(n),i.change())});$("#Floors").change(function(){$.ajax({type:"get",dataType:"",url:"/RealEstate.Admin/Home/GetPropertyTypeConstructionsForJson",data:{typeId:$("#TypeId").val(),floors:$("#Floors").val()},success:function(n){var t=$("#TypeConstructionId").val();t==""&&(t=$("#TypeConstructionId").data("autofill"));$("#TypeConstructionId").empty().append("<option value=''>-- Vui lòng chọn --<\/option>");$.each(n.list,function(n,t){$("#TypeConstructionId").append("<option value="+t.Value+">"+t.Text+"<\/option>")});$("#TypeConstructionId").val(t).change()},error:function(n,t,i){$("#TypeConstructionId").empty().append("<option value=''>-- Vui lòng chọn --<\/option>");console.log(i)}})});$("#LocationCssClass").change(function(){switch($(this).val()){case"h-front":$("#StreetWidth").removeAttr("disabled");$("#divStreetWidth").show();$("#DistanceToStreet").attr("disabled","disabled");$("#divDistanceToStreet").hide();$("#AlleyTurns").attr("disabled","disabled");$("#divAlleyTurns").hide();$('input[id^="AlleyWidth"]').attr("disabled","disabled");$('[id^="divAlleyWidth"]').hide();break;case"h-alley":$("#StreetWidth").attr("disabled","disabled");$("#divStreetWidth").hide();$("#DistanceToStreet").removeAttr("disabled");$("#divDistanceToStreet").show();$("#AlleyTurns").removeAttr("disabled");$("#divAlleyTurns").show();$('input[id^="AlleyWidth"]').removeAttr("disabled");var n=$("#AlleyTurns").val();for($('[id^="divAlleyWidth"]').hide(),i=0;i<=n;i++)$('[id^="divAlleyWidth'+i+'"]').show();$('[id^="divAlleyWidth1"]').show();break;default:$("#StreetWidth").attr("disabled","disabled");$("#divStreetWidth").hide();$("#DistanceToStreet").attr("disabled","disabled");$("#divDistanceToStreet").hide();$("#AlleyTurns").attr("disabled","disabled");$("#divAlleyTurns").hide();$('input[id^="AlleyWidth"]').attr("disabled","disabled");$('[id^="divAlleyWidth"]').hide()}}).change();$("#AlleyTurns").change(function(){if($("#LocationCssClass").val()=="h-alley"){var n=$(this).val();for(n>6&&(n=6,$(this).val("6")),n<=0&&(n=1,$(this).val("1")),$('[id^="divAlleyWidth"]').hide(),i=0;i<=n;i++)$('[id^="divAlleyWidth'+i+'"]').show()}}).change();$("#PriceProposed,#PaymentMethodId,#PaymentUnitId").change(function(){DocGiaRao()});$("#PriceProposed").keyup(function(){DocGiaRao()});$("#PriceProposed").length>0&&DocGiaRao();$("#AdsTypeCssClass").length>0?$("#WardId,#StreetId,#AddressNumber,#AddressCorner,#AdsTypeCssClass").change(function(){validateUserPropertyAddress()}):$("#StreetId,#AddressNumber,#AddressCorner").change(function(){validateUserPropertyAddress()});$("#SubmitEstimate").length>0&&$("#SubmitEstimate").is(":checked")&&(toggleEstimate(!0),$("html, body").animate({scrollTop:$("#block-estimate").offset().top},500));$.fn.autoNumeric&&($(".AutoFloat3").autoNumeric("init",{aPad:!1,vMax:"999"}),$(".AutoFloat4").autoNumeric("init",{aPad:!1,vMax:"9999"}),$(".AutoFloat7").autoNumeric("init",{aPad:!1,vMax:"9999999"}),$(".AutoInt2").autoNumeric("init",{aPad:!1,vMin:"0",vMax:"99"}),$(".AutoInt4").autoNumeric("init",{aPad:!1,vMin:"0",vMax:"9999"}),$('input[type="submit"], button[type="submit"]').click(function(){$("input.AutoFloat3, input.AutoFloat4, input.AutoFloat7, input.AutoInt2, input.AutoInt4").each(function(){$(this).val().length>0&&$(this).val($(this).autoNumeric("get"))})}));$.fn.limiter&&($("#charsTitle").length!=0&&(r=$("#charsTitle"),$("#Title").limiter(120,r)),$("#charsContent").length!=0&&(u=$("#charsContent"),$("#Content").limiter(1e3,u)),$("#charsNote").length!=0&&(f=$("#charsNote"),$("#Note").limiter(500,f)));$('[name="submit.Estimate"]').click(function(){(isNaN($("#PriceProposed").val())||$("#PriceProposed").val()=="")&&$("#PriceProposed").val(-1)});$("form[method=get]").submit(function(){$("input[type=text], select, input[type=hidden]",this).each(function(){this.disabled=$(this).val()=="false"||$(this).val()==""});$("input[type=checkbox]",this).each(function(){this.disabled=!$(this).is(":checked")});$('button[name="submit.Filter"]').attr("disabled","disabled");$('input[name="__RequestVerificationToken"]').attr("disabled","disabled")});$('input[type="submit"], button[type="submit"]').click(function(){var n=new Date(VNDateTimeToUTCDateTime($(".date-vip-start").val(),"/")),r=new Date(VNDateTimeToUTCDateTime($(".date-vip-end").val(),"/")),s,i,h,c,l;n>r&&(n.setDate(n.getDate()+1),$(".date-vip-end").val(UTCDateTimeToVNDateTime(n,"/")));var u=GetTotalDay(n,r),t=parseInt($("#AdsTypeVIP").val()),y=$("#statusProperty").val(),f=$("#oldAdsTypeVip").val(),e=0,o=0;if(t!=0&&t<=3&&$("#AdsTypeVIP").is(":enabled")&&(s=parseInt($("#Amount").val()),i=$("#oldPostingDates").val(),y==0&&f!=0&&(h=Number(f-1),c=unitPriceArray[h],o=Number(i)*c),t=Number(t-1),l=unitPriceArray[t],e=u*l,i<u&&e>Number(o+s)))return alert('Bạn không đủ tiền trong tài khoản để đăng tin VIP này. Vui lòng nạp tiền vào tài khoản đăng tin hoặc chọn đăng "tin thường" miễn phí.'),!1;var p=$("#AreaTotal",$(this).closest("form")),a=$("#AreaTotalWidth",$(this).closest("form")),v=$("#AreaTotalLength",$(this).closest("form"));p.val().length>0?($(a).removeAttr("required"),$(v).removeAttr("required")):($(a).attr("required","required"),$(v).attr("required","required"))});$("#ModalUpdate").click(function(){$.ajax({type:"post",url:"/ajax/RealEstateForum/PostFrontEnd/ValidateCaptcha",data:{recaptcha_challenge_field:$("#recaptcha_challenge_field").val(),recaptcha_response_field:$("#recaptcha_response_field").val(),__RequestVerificationToken:antiForgeryToken},success:function(n){n.status?($("#CaptchatModal").modal("hide"),$("#alertCaptcha").hide(),$("#submitCaptcha").val("submit.Captcha"),$("#formUpdateId").submit(),Recaptcha.reload()):($("#alertCaptcha").show(),Recaptcha.reload())},error:function(){console.log("Có lỗi xảy ra!")}})});($("#ContactEmail").length>0||$("#Email").length>0)&&getContactInfo();$(".guide-help").click(function(){var n=$(this).attr("data-help");n=="addresscorner"&&($("#GuideModal .modal-title").text("Hướng dẫn ghi số nhà"),$("#GuideModal .ghi-so-nha").show(),$("#GuideModal .map-help").hide(),$("#GuideModal .map-help").hide());n=="maphelp"&&($("#GuideModal .modal-title").text("Hướng dẫn ghi số lần rẽ"),$("#GuideModal .map-help").show(),$("#GuideModal .ghi-so-nha").hide(),$("#GuideModal .remainingvalue").hide());n=="remainingvalue"&&($("#GuideModal .modal-title").text("Hướng dẫn đánh giá chất lượng còn lại của bđs"),$("#GuideModal .map-help").hide(),$("#GuideModal .ghi-so-nha").hide(),$("#GuideModal .remainingvalue").show());$("#GuideModal").modal("show")});$($(".content-item-map")).insertBefore($(".after-map-item"))});$("#linkEstimate").click(function(){return alert("Để định giá bạn cần nhập thêm một số thông tin bắt buộc."),toggleEstimate(!0),$(this).closest("form").validate().form(),!1}),function(n){n.fn.extend({limiter:function(t,i){function r(n,i){var r=n.value.length;r>t&&(n.value=n.value.substr(0,t),r=t);i.html(t-r)}n(this).on("keyup focus",function(){r(this,i)});r(n(this)[0],i)}})}(jQuery);$(function(){$.fn.datepicker&&($(".date-box").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,numberOfMonths:1,onSelect:function(n){id=$(this).attr("id");id.indexOf("From")>=0?$("#"+$(this).attr("id").replace("From","To")).datepicker("option","minDate",n):id.indexOf("To")>=0&&$("#"+$(this).attr("id").replace("To","From")).datepicker("option","maxDate",n)}}),$(".date-vip").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,minDate:new Date}),$(".date-vip-start, .date-vip-end").change(function(){ResetDateVip(2)}));ResetDateVip(3)});$("#AdsTypeVIP").change(function(){ResetDateVip(1)});$("#DistrictId").change(function(){ResetDateVip(3)});$("#formUpdateId").submit(function(){});$("#AreaLegalWidth").change(function(){var n=$("#AreaLegalBackWidth",$(this).closest("form"));n.val($(this).val())});$("#AreaLegalWidth, #AreaLegalLength, #AreaLegalBackWidth").change(function(){var f=$("#AreaLegalWidth",$(this).closest("form")),t=$("#AreaLegalBackWidth",$(this).closest("form")),e=$("#AreaLegalLength",$(this).closest("form")),s=$("#AreaLegal",$(this).closest("form")),i=(Number(f.val())+Number(t.val()))/2*e.val(),n,r,u,o;(t.val()==null||t.val()==0)&&(i=Number(f.val())*Number(e.val()));s.val(i).change();n=$("#TypeId",$(this).closest("form")).val();n!=231&&n!=""&&n!=null&&(r=$("#AreaConstruction",$(this).closest("form")),r.val(i),u=AreaContructionChange($(r)),u>0&&(o=$("#AreaConstructionFloor",$(this).closest("form")),o.val(u)))});$("#Floors").change(function(){var t=Number($(this).val()),r=$("#AreaConstruction",$(this).closest("form")),u=$("#AreaConstructionFloor",$(this).closest("form")),i;if(t>10){var f=$("#HaveBasement",$(this).closest("form")),e=$("#HaveMezzanine",$(this).closest("form")),o=$("#HaveTerrace",$(this).closest("form")),n=0;f.is(":checked")&&(n+=1);e.is(":checked")&&(n+=1);o.is(":checked")&&(n+=1);i=(t+1+Number(n))*r.val();u.val(i)}});$("#HaveBasement, #HaveMezzanine, #HaveTerrace").change(function(){var t=$("#AreaConstructionFloor",$(this).closest("form")),n=AreaContructionChange($(this));n>0&&t.val(n)});
//# sourceMappingURL=realestate.frontend.property.edit.min.js.map
